# Добрые дела Росатома

Прототип многостраничного сайта для объединения НКО, волонтёров и координаторов в городах присутствия ГК Росатом.

## Структура проекта

```
├── manage.py                   # Django management script
├── requirements.txt            # Зависимости Python
├── rosatom_dobro/             # Основной проект Django
│   ├── __init__.py
│   ├── settings.py            # Настройки проекта
│   ├── urls.py                # Главные URL маршруты
│   └── wsgi.py                # WSGI конфигурация
├── main/                      # Основное приложение
│   ├── __init__.py
│   ├── models.py              # Модели БД (NKO, News, Event, KnowledgeItem)
│   ├── views.py               # Представления (views)
│   ├── urls.py                # URL маршруты приложения
│   ├── forms.py               # Формы (регистрация)
│   ├── admin.py               # Админ-панель
│   └── apps.py
├── templates/
│   ├── base.html              # Базовый шаблон (extends)
│   ├── index.html             # Главная страница
│   ├── nko.html               # Список НКО
│   ├── nko_detail.html        # Детальная страница НКО
│   ├── knowledge.html         # База знаний
│   ├── calendar.html          # Календарь событий
│   ├── news.html              # Лента новостей
│   ├── register.html          # Регистрация
│   ├── login.html             # Вход
│   └── components/
│       ├── header.html        # Компонент header (include)
│       └── footer.html        # Компонент footer (include)
├── static/
│   ├── css/
│   │   ├── styles.css         # Основные стили
│   │   └── pages.css          # Стили страниц + формы
│   └── js/
│       └── script.js          # JavaScript
└── README.md
```

## Реализованный функционал

### ✅ Основные разделы
- Главная страница с описанием проекта
- Список НКО с фильтрацией
- База знаний с материалами
- Календарь событий
- Лента новостей

### ✅ Дизайн
- Минималистичный дизайн в цветах Росатома
- Адаптивная вёрстка для мобильных устройств
- Интуитивная навигация
- Плавные переходы и анимации

### ✅ Интерактивность
- Выбор города с сохранением в localStorage
- Фильтрация по категориям
- Поиск по материалам
- Плавная прокрутка

## Запуск проекта

### Установка зависимостей
```bash
pip install -r requirements.txt
```

### Инициализация базы данных
```bash
python manage.py makemigrations main
python manage.py migrate
```

**Примечание:** При первом запуске будут созданы таблицы для:
- Пользователей и профилей (с полем отчества)
- НКО
- Новостей
- События
- Материалов базы знаний

### Создание профилей для существующих пользователей
Если у вас уже есть пользователи в базе данных, создайте для них профили:
```bash
python manage.py create_profiles
```

### Создание суперпользователя (для админ-панели)
```bash
python manage.py createsuperuser
```

### Запуск Django сервера
```bash
python manage.py runserver
```

Откройте браузер и перейдите по адресу: `http://127.0.0.1:8000`

Админ-панель доступна по адресу: `http://127.0.0.1:8000/admin`

## Архитектура проекта

Проект использует Django framework с шаблонизатором Django Templates:

- **base.html** - базовый шаблон с общей структурой (используется через `{% extends "base.html" %}`)
- **components/header.html** - компонент header (подключается через `{% include %}`)
- **components/footer.html** - компонент footer (подключается через `{% include %}`)
- Все страницы наследуются от base.html и переопределяют блок `{% block content %}`

## URL маршруты

- `/` - Главная страница
- `/nko/` - Список НКО
- `/nko/<id>/` - Детальная страница НКО
- `/news/` - Список новостей
- `/news/<id>/` - Детальная страница новости
- `/calendar/` - Календарь событий
- `/knowledge/` - База знаний
- `/register/` - Регистрация
- `/login/` - Вход
- `/logout/` - Выход
- `/profile/` - Автоматическое перенаправление на профиль по роли
- `/profile/user/` - Профиль пользователя
- `/profile/moderator/` - Панель модератора
- `/profile/admin/` - Панель администратора
- `/admin/` - Админ-панель Django

## Система ролей

В проекте реализована система ролей пользователей:

- **user** (Пользователь) - обычный пользователь, по умолчанию
- **moderator** (Модератор) - модератор контента
- **admin** (Администратор) - администратор системы

При клике на никнейм в header пользователь автоматически перенаправляется на страницу профиля, соответствующую его роли.

### Установка роли пользователя

Через Django Admin:
1. Перейдите в админ-панель: `http://127.0.0.1:8000/admin`
2. Откройте раздел "Профили пользователей"
3. Выберите нужного пользователя и измените поле "Роль"

Через Django shell:
```bash
python manage.py shell
```
```python
from django.contrib.auth.models import User
user = User.objects.get(username='ваш_username')
user.profile.role = 'admin'  # или 'moderator', или 'user'
user.profile.save()
print(f"Роль пользователя {user.username}: {user.profile.role}")
```

## Цветовая палитра Росатома

- Основной цвет: #00A3E0
- Вторичный цвет: #0066A1
- Акцентный цвет: #FF6B35
- Тёмный: #1A1A1A
- Светло-серый: #F5F5F5

## Дальнейшее развитие

Для полноценной работы потребуется:
- Backend для хранения данных
- Система авторизации
- Административная панель
- Интеграция с картами
- API для работы с контентом
- База данных для НКО, событий и новостей
